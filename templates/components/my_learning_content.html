{% load static %}

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for item in enrollments %}
    <div class="bg-[#1A1D24] p-6 rounded-[2rem] border border-white/5 flex flex-col justify-between group transition-all duration-300 hover:border-indigo-500/50 hover:shadow-[0_0_30px_rgba(99,102,241,0.15)] hover:-translate-y-1 animate-fade-in relative overflow-hidden">
        
        <div class="absolute inset-0 bg-gradient-to-br from-indigo-600/0 to-violet-600/0 opacity-0 group-hover:opacity-5 transition-all duration-500 pointer-events-none"></div>

        <div class="relative z-10">
            <div class="flex justify-between items-start mb-6">
                <div class="flex items-center space-x-4">
                    <div class="w-14 h-14 rounded-2xl bg-indigo-600/10 text-indigo-400 flex items-center justify-center border border-indigo-500/20 group-hover:bg-indigo-600 group-hover:text-white transition-all duration-300">
                        <i data-feather="book" class="w-7 h-7"></i>
                    </div>
                    <div>
                        <h4 class="font-bold text-white text-lg leading-tight line-clamp-1" title="{{ item.course.course_name }}">{{ item.course.course_name }}</h4>
                        
                        <div class="flex gap-2 mt-1.5">
                            {% if item.progress_percent == 100 %}
                                <span class="inline-flex items-center px-2 py-0.5 rounded-md bg-green-500/10 text-[10px] font-bold text-green-400 uppercase tracking-wider border border-green-500/20">
                                    Selesai
                                </span>
                            {% else %}
                                <span class="inline-flex items-center px-2 py-0.5 rounded-md bg-[#252A33] text-[10px] font-bold text-gray-400 uppercase tracking-wider border border-white/5">
                                    Active
                                </span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            
            <p class="text-sm text-gray-400 line-clamp-2 mb-4 h-10 leading-relaxed">
                {{ item.course.description|default:"Tidak ada deskripsi singkat." }}
            </p>

            <div class="flex justify-between items-end mb-2">
                <span class="text-xs font-bold text-gray-500 uppercase">Progress</span>
                <span class="text-lg font-bold text-white">{{ item.progress_percent }}%</span>
            </div>
            <div class="w-full bg-[#0F1115] rounded-full h-2 mb-4 overflow-hidden border border-white/5">
                <div class="bg-gradient-to-r from-indigo-500 to-violet-500 h-full rounded-full transition-all duration-1000" style="width: {{ item.progress_percent }}%"></div>
            </div>

            <div class="flex justify-between items-center pt-4 border-t border-white/5 group-hover:border-indigo-500/20 transition-all">
                <div class="flex items-center space-x-2">
                     <div class="w-6 h-6 rounded-full bg-[#252A33] flex items-center justify-center text-[10px] font-bold text-gray-400 border border-white/5">
                        {{ item.course.lecturer.name|slice:":1" }}
                    </div>
                    <span class="text-xs text-gray-500 truncate max-w-[100px]">{{ item.course.lecturer.name }}</span>
                </div>
                
                {% if item.first_module_id %}
                <a href="{% url 'detail_modul' item.first_module_id %}" class="group/btn flex items-center text-xs font-bold text-white bg-[#252A33] hover:bg-indigo-600 px-3 py-1.5 rounded-full transition-all border border-white/5 hover:border-indigo-500">
                    Lanjut <i data-feather="arrow-right" class="w-3 h-3 ml-1.5"></i>
                </a>
                {% else %}
                <span class="text-xs font-bold text-gray-600 cursor-not-allowed px-2">Locked</span>
                {% endif %}
            </div>
        </div>
    </div>
    {% empty %}
    <div class="col-span-full py-16 text-center bg-[#1A1D24] rounded-[2rem] border border-dashed border-white/10 animate-fade-in flex flex-col items-center justify-center">
        <div class="w-16 h-16 bg-[#252A33] rounded-full flex items-center justify-center mb-4 text-gray-600">
            <i data-feather="search" class="w-8 h-8"></i>
        </div>
        <p class="text-gray-400 font-medium mb-1">Tidak ada kursus yang ditemukan.</p>
        <a href="{% url 'mahasiswa_dashboard' %}" class="text-indigo-400 hover:text-indigo-300 text-sm font-bold mt-2">Cari di Katalog</a>
    </div>
    {% endfor %}
</div>

{% if enrollments.has_other_pages %}
<div class="flex justify-center mt-12 gap-2 animate-fade-in">
    
    {# Prev #}
    {% if enrollments.has_previous %}
        <button onclick="changePage({{ enrollments.previous_page_number }})" class="px-4 py-2 bg-[#1A1D24] border border-white/10 rounded-xl text-gray-400 hover:bg-[#252A33] hover:text-white transition-all text-sm font-bold flex items-center">
            <i data-feather="chevron-left" class="w-4 h-4 mr-1"></i> Prev
        </button>
    {% else %}
        <button disabled class="px-4 py-2 bg-[#0F1115] border border-white/5 rounded-xl text-gray-600 cursor-not-allowed flex items-center text-sm font-bold">
            <i data-feather="chevron-left" class="w-4 h-4 mr-1"></i> Prev
        </button>
    {% endif %}

    {# Numbers #}
    <div class="flex gap-2">
        {% for i in enrollments.paginator.page_range %}
            {% if enrollments.number == i %}
                <button class="w-10 h-10 bg-indigo-600 text-white font-bold rounded-xl shadow-lg shadow-indigo-600/30 transform scale-105 text-sm">
                    {{ i }}
                </button>
            {% else %}
                <button onclick="changePage({{ i }})" class="w-10 h-10 bg-[#1A1D24] border border-white/10 text-gray-400 font-medium rounded-xl hover:bg-[#252A33] hover:text-white transition-all text-sm">
                    {{ i }}
                </button>
            {% endif %}
        {% endfor %}
    </div>

    {# Next #}
    {% if enrollments.has_next %}
        <button onclick="changePage({{ enrollments.next_page_number }})" class="px-4 py-2 bg-[#1A1D24] border border-white/10 rounded-xl text-gray-400 hover:bg-[#252A33] hover:text-white transition-all text-sm font-bold flex items-center">
            Next <i data-feather="chevron-right" class="w-4 h-4 ml-1"></i>
        </button>
    {% else %}
        <button disabled class="px-4 py-2 bg-[#0F1115] border border-white/5 rounded-xl text-gray-600 cursor-not-allowed flex items-center text-sm font-bold">
            Next <i data-feather="chevron-right" class="w-4 h-4 ml-1"></i>
        </button>
    {% endif %}
</div>
{% endif %}