{% load static %}

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for course in available_courses %}
    <a href="{% url 'course_detail' course.course_id %}" class="block group h-full animate-fade-in">
        <div class="bg-[#1A1D24] rounded-[2rem] p-3 border border-white/5 transition-all duration-300 hover:border-indigo-500/30 hover:shadow-[0_0_30px_rgba(99,102,241,0.1)] hover:-translate-y-1 h-full flex flex-col">
            
            <div class="relative h-40 rounded-[1.5rem] overflow-hidden bg-[#0F1115] mb-4 flex-shrink-0">
                {# GAMBAR UNSPLASH #}
                <img src="https://images.unsplash.com/photo-1524178232363-1fb2b075b655?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60" 
                     class="w-full h-full object-cover opacity-60 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700"
                     alt="{{ course.course_name }}">
                
                <div class="absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-[#1A1D24] to-transparent pt-10">
                    <h4 class="text-white font-bold text-lg leading-tight line-clamp-1 group-hover:text-indigo-300 transition-colors">{{ course.course_name }}</h4>
                </div>
            </div>

            <div class="flex flex-col flex-1 justify-between px-2 pb-2">
                <p class="text-sm text-gray-400 mb-4 line-clamp-2 leading-relaxed h-10">
                    {{ course.description|default:"Tidak ada deskripsi." }}
                </p>

                <div class="flex justify-between items-center pt-3 border-t border-white/5">
                    <div class="flex items-center space-x-2">
                        <div class="w-6 h-6 rounded-full bg-[#252A33] flex items-center justify-center text-gray-400 font-bold text-[10px] border border-white/5">
                            {{ course.lecturer.name|slice:":1" }}
                        </div>
                        <span class="text-xs text-gray-500 font-medium truncate max-w-[100px]">{{ course.lecturer.name }}</span>
                    </div>
                    <div class="text-indigo-400 hover:text-white transition-colors">
                        <i data-feather="arrow-right-circle" class="w-5 h-5"></i>
                    </div>
                </div>
            </div>
        </div>
    </a>
    {% empty %}
    <div class="col-span-3 py-12 text-center text-gray-600 bg-[#1A1D24] rounded-[2rem] border border-dashed border-white/10">
        <p>Tidak ada kelas yang ditemukan.</p>
    </div>
    {% endfor %}
</div>

{# PAGINATION CONTROLS (Terkoneksi ke fungsi changePage di dashboard) #}
{% if available_courses.has_other_pages %}
<div class="flex justify-center mt-8 gap-2">
    {% if available_courses.has_previous %}
        <button onclick="changePage({{ available_courses.previous_page_number }})" class="w-10 h-10 flex items-center justify-center rounded-xl bg-[#1A1D24] text-gray-400 hover:text-white hover:bg-[#252A33] border border-white/10 transition-all">
            <i data-feather="chevron-left" class="w-4 h-4"></i>
        </button>
    {% endif %}

    {% for i in available_courses.paginator.page_range %}
        {% if available_courses.number == i %}
            <button class="w-10 h-10 flex items-center justify-center rounded-xl bg-indigo-600 text-white font-bold shadow-lg shadow-indigo-500/30">
                {{ i }}
            </button>
        {% else %}
            <button onclick="changePage({{ i }})" class="w-10 h-10 flex items-center justify-center rounded-xl bg-[#1A1D24] text-gray-400 hover:text-white hover:bg-[#252A33] border border-white/10 transition-all">
                {{ i }}
            </button>
        {% endif %}
    {% endfor %}

    {% if available_courses.has_next %}
        <button onclick="changePage({{ available_courses.next_page_number }})" class="w-10 h-10 flex items-center justify-center rounded-xl bg-[#1A1D24] text-gray-400 hover:text-white hover:bg-[#252A33] border border-white/10 transition-all">
            <i data-feather="chevron-right" class="w-4 h-4"></i>
        </button>
    {% endif %}
</div>
{% endif %}