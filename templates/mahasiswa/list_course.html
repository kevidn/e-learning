<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Browse Courses</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen p-8">

<div class="absolute inset-0 overflow-hidden -z-10">
    <div class="absolute top-1/4 left-1/4 w-64 h-64 rounded-full bg-blue-100 opacity-20 blur-3xl"></div>
    <div class="absolute bottom-1/3 right-1/4 w-72 h-72 rounded-full bg-indigo-100 opacity-20 blur-3xl"></div>
</div>

<div class="max-w-4xl mx-auto">
    <div class="bg-white/90 backdrop-blur-sm p-8 rounded-2xl shadow-xl border border-white/20">

        <a href="{% url 'mahasiswa_dashboard' %}" class="inline-flex items-center mb-6 text-blue-600 hover:text-blue-800 transition-colors">
            <i data-feather="arrow-left" class="w-4 h-4 mr-2"></i>
            Kembali ke Dashboard
        </a>

        <div class="flex items-center space-x-3 mb-6">
            <i data-feather="search" class="text-indigo-600 w-6 h-6"></i>
            <h2 class="text-2xl font-bold text-gray-800">Browse All Courses</h2>
        </div>

        {% if messages %}
        {% for message in messages %}
        <div class="border-l-4 p-4 mb-4 rounded
                        {% if message.tags == 'success' %} bg-green-100 border-green-500 text-green-700
                        {% elif message.tags == 'error' %} bg-red-100 border-red-500 text-red-700
                        {% else %} bg-blue-100 border-blue-500 text-blue-700 {% endif %}"
             role="alert">
            <p>{{ message }}</p>
        </div>
        {% endfor %}
        {% endif %}

        <div class="space-y-4">
            {% for course in all_courses %}
            <div class="block p-5 bg-white/50 rounded-xl border border-gray-200/50">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800">{{ course.course_name }}</h3>
                        <p class="text-sm text-gray-500 mb-2 sm:mb-0">{{ course.description|truncatewords:20 }}</Dosen: {{ course.lecturer.name }}</p>
                    </div>

                    {% if course.course_id in enrolled_course_ids %}
                    <span class="inline-flex items-center px-4 py-2 bg-green-100 text-green-700 rounded-lg font-medium text-sm">
                                <i data-feather="check-circle" class="w-4 h-4 mr-2"></i>
                                Enrolled
                            </span>
                    {% else %}
                    <form method="POST" action="{% url 'enroll_in_course' course.course_id %}">
                        {% csrf_token %}
                        <button type="submit"
                                class="flex items-center justify-center w-full sm:w-auto bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-2 px-5 rounded-lg font-semibold hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 shadow-md hover:shadow-lg no-underline">
                            <i data-feather="plus-circle" class="w-4 h-4 mr-2"></i>
                            Enroll
                        </button>
                    </form>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>

    </div>
</div>

<script>
    feather.replace();
</script>
</body>
</html>