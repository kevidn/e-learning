{% extends 'base.html' %}
{% load static %}

{% block title %}Kelola Modul | Modern Dark{% endblock %}
{% block sidebar_menu %}
    {% include 'components/sidebar_dosen.html' %}
{% endblock %}

{% block content %}
<div class="min-h-full bg-[#0F1115] p-6 lg:p-10 text-white">
    
    <div class="max-w-6xl mx-auto">
        <div class="flex flex-col md:flex-row justify-between items-end gap-6 mb-10">
            <div>
                <a href="{% url 'dosen_dashboard' %}" class="inline-flex items-center text-gray-500 hover:text-white text-xs font-bold mb-4 uppercase tracking-widest transition-colors">
                    <i data-feather="arrow-left" class="w-3 h-3 mr-2"></i> Kembali ke Dashboard
                </a>
                <h1 class="text-4xl font-black text-white tracking-tight">Daftar Modul</h1>
                <p class="text-gray-400 mt-2">Kelola semua materi pembelajaran Anda di sini.</p>
            </div>
            
            <a href="{% url 'tambah_modul' %}" class="bg-white text-black px-6 py-3 rounded-xl font-bold hover:bg-gray-200 transition-all shadow-lg flex items-center">
                <i data-feather="plus" class="w-4 h-4 mr-2"></i> Tambah Baru
            </a>
        </div>

        <div class="bg-[#1A1D24] rounded-[2rem] border border-white/5 overflow-hidden shadow-2xl">
            
            <div class="hidden md:grid grid-cols-12 gap-4 p-6 border-b border-white/5 bg-[#20242C] text-xs font-bold text-gray-500 uppercase tracking-widest">
                <div class="col-span-6">Judul Modul</div>
                <div class="col-span-4">Mata Kuliah</div>
                <div class="col-span-2 text-right">Aksi</div>
            </div>

            <div class="divide-y divide-white/5">
                {% for modul in modules %}
                <div class="group grid grid-cols-1 md:grid-cols-12 gap-4 p-6 items-center hover:bg-[#20242C] transition-colors">
                    
                    <div class="col-span-6 flex items-center gap-4">
                        <div class="w-12 h-12 rounded-xl bg-[#252A33] border border-white/5 flex items-center justify-center text-gray-400 group-hover:text-indigo-400 group-hover:border-indigo-500/30 transition-all">
                            <i data-feather="book" class="w-5 h-5"></i>
                        </div>
                        <div>
                            <h4 class="text-lg font-bold text-white group-hover:text-indigo-300 transition-colors">{{ modul.title }}</h4>
                            <p class="text-xs text-gray-500 mt-0.5 md:hidden">{{ modul.course.course_name }}</p>
                        </div>
                    </div>

                    <div class="hidden md:block col-span-4">
                        <span class="inline-block px-3 py-1 rounded-lg bg-[#252A33] border border-white/5 text-xs text-gray-300 font-medium">
                            {{ modul.course.course_name }}
                        </span>
                    </div>

                    <div class="col-span-6 md:col-span-2 flex justify-end gap-2 mt-4 md:mt-0">
                        <a href="{% url 'edit_modul' modul.module_id %}" class="p-2 rounded-lg bg-[#252A33] text-gray-400 hover:text-white hover:bg-indigo-600 transition-all" title="Edit">
                            <i data-feather="edit-2" class="w-4 h-4"></i>
                        </a>
                        <form method="POST" action="{% url 'hapus_modul' modul.module_id %}" onsubmit="return confirm('Hapus modul ini?');">
                            {% csrf_token %}
                            <button type="submit" class="p-2 rounded-lg bg-[#252A33] text-gray-400 hover:text-white hover:bg-red-600 transition-all" title="Hapus">
                                <i data-feather="trash-2" class="w-4 h-4"></i>
                            </button>
                        </form>
                        <a href="{% url 'detail_modul_dosen' modul.module_id %}" class="p-2 rounded-lg bg-white text-black hover:bg-gray-200 transition-all font-bold text-xs flex items-center px-4">
                            Kelola
                        </a>
                    </div>
                </div>
                {% empty %}
                <div class="p-12 text-center">
                    <div class="w-16 h-16 bg-[#252A33] rounded-full flex items-center justify-center mx-auto mb-4 text-gray-600">
                        <i data-feather="inbox" class="w-8 h-8"></i>
                    </div>
                    <p class="text-gray-500">Belum ada modul yang tersedia.</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<style>
    body { background-color: #0F1115 !important; }
    aside { background-color: #1A1D24 !important; border-color: #2A2E37 !important; }
</style>
{% endblock %}